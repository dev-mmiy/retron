# UART出力なし問題のデバッグ

## 問題

- `str x0, [x1]`命令が実行されている
- UARTCR = 0x301（正常）
- しかし、QEMUのシリアル出力に何も表示されない

## 考えられる原因

### 1. QEMUのUARTデバイスが書き込みを受け付けていない
QEMUのPL011 UARTデバイスが、UARTDRへの書き込みを受け付けていない可能性があります。

### 2. メモリマッピングの問題
0x09000000への書き込みが、QEMUのUARTデバイスに正しくマッピングされていない可能性があります。

### 3. QEMUのシリアル出力設定の問題
`-serial stdio`オプションが正しく設定されていない可能性があります。

### 4. UARTDRへの書き込みが実際には行われていない
キャッシュの問題やメモリバリアの問題で、書き込みが実際には行われていない可能性があります。

## 確認手順

### ステップ1: QEMUの起動オプションを確認
```bash
cat run-tkernel-qemu.sh
```
`-serial stdio`が正しく設定されているか確認します。

### ステップ2: QEMUのログを確認
QEMUの起動時にエラーメッセージがないか確認します。

### ステップ3: 別の方法でUARTDRに書き込んでテスト
GDBから直接UARTDRに書き込んで、QEMUのシリアル出力に表示されるか確認します。

### ステップ4: UARTFRの状態を確認
UARTFR（Flag Register）の状態を確認し、TXFF（Transmit FIFO Full）ビットがセットされていないか確認します。

## 解決方法

### 方法1: QEMUの起動オプションを確認
`-serial stdio`が正しく設定されているか確認します。

### 方法2: UARTFRの状態を確認
TXFFビットがセットされている場合、FIFOが満杯で書き込みが受け付けられていません。

### 方法3: メモリマッピングを確認
0x09000000が正しくUARTデバイスにマッピングされているか確認します。
