# QEMU UARTデバッグ

## 問題

キャッシュフラッシュ（`dc civac`）を追加しても、UARTDRへの書き込みが反映されません。

## 重要な発見

- `str x0, [x1]`命令が実行されている
- `dc civac, x1`命令も実行されている（キャッシュフラッシュ）
- `dmb sy`命令も実行されている（メモリバリア）
- しかし、UARTDR = 0x0のまま
- UARTFR = 0x90のまま（変化なし）
- QEMUのシリアル出力に何も表示されない

## 考えられる原因

### 1. QEMUのUARTデバイスの問題
QEMUのPL011 UARTデバイスが、UARTDRへの書き込みを受け付けていない可能性があります。

### 2. メモリマッピングの問題
0x09000000への書き込みが、QEMUのUARTデバイスに正しくマッピングされていない可能性があります。

### 3. QEMUのシリアル出力設定の問題
`-serial stdio`オプションが正しく設定されていない可能性があります。

## 確認手順

### ステップ1: QEMUのmonitorでメモリマッピングを確認

```bash
./run-qemu-with-monitor.sh
```

QEMUのmonitorで：
```
(qemu) info mtree
(qemu) x/16x 0x09000000
```

### ステップ2: QEMUのシリアル出力設定を確認

`-serial stdio`オプションが正しく設定されているか確認します。

### ステップ3: 別のシリアル出力方法を試す

`-chardev`オプションを使用して、シリアル出力を別の方法で設定します。
