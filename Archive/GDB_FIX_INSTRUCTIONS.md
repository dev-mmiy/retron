# GDB修正手順

## 現在の状態

✅ エントリーポイント（0x40200000）のメモリにカーネルコードが正しくロードされている
⚠️ PCレジスタが0x200を指している（エントリーポイントではない）

## 修正手順

### ステップ1: エントリーポイントに移動

```gdb
(gdb) set $pc = 0x40200000
(gdb) info registers pc
```

PCレジスタが0x40200000を指していることを確認します。

### ステップ2: 現在の命令を確認

```gdb
(gdb) x/10i $pc
```

`start`関数のコードが表示されることを確認します。

### ステップ3: スタックポインタの確認

```gdb
(gdb) info registers sp
(gdb) x/16x $sp
```

スタックポインタが有効なアドレスを指しているか確認します。
必要に応じて、スタックポインタを設定します（通常はQEMUが設定します）。

### ステップ4: 実行を開始

```gdb
(gdb) continue
```

または、ステップ実行で確認：
```gdb
(gdb) stepi
(gdb) stepi
(gdb) info registers pc
```

## 期待される動作

正常に動作している場合：
1. PCレジスタが0x40200000を指す
2. `start`関数のコードが表示される
3. `continue`で実行を開始すると、`start`ブレークポイントで停止する
4. その後、`main`、`uart_pl011_init`、`uart_pl011_putchar`の順にブレークポイントで停止する

## トラブルシューティング

### スタックポインタが無効な場合

スタックポインタが0や無効なアドレスを指している場合：
```gdb
(gdb) set $sp = 0x40000000
```

ただし、通常はQEMUが正しくスタックを設定するので、まずは実行を試してみてください。

### 実行が進まない場合

ステップ実行で確認：
```gdb
(gdb) stepi
(gdb) info registers pc
(gdb) x/10i $pc
```
